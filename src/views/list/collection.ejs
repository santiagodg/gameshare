<%- include (".././partials/header") %>
<%- include (".././partials/navbar") %>
<div class="container py-5 px-5 h-100 main">
    <div class="row">
        <div class="col">
            <form action="/list/new" class="inline">
                <button class="btn btn-outline-primary float-right submit-button">Create New List</button>
            </form>
            <h1>My Lists</h1>
            <% if (current_user && lists && lists.length > 0) { %>
                <% lists.forEach(list => { %>
                    <div class="list-card my-4 py-4 pl-4">
                        <div class="flex-container">
                            <div class="flex-child">
                                <h5 class="pb-2"><a href="/list/<%= list._id %>"><%= list.name %></a></h5>  
                            </div>
                            <div class="flex-child mr-4 text-right">
                                <span><%= list.likes.length %> Likes â€¢</span>
                                <span><%= list.comments.length %> Comments</span>
                            </div>
                        </div>
                        <div class="p-0 m-0">
                            <% let i = 0 %>
                            <% for (; i < 6 && i < list.games.length; i = i + 1) { %>
                                <img class="list-img p-0 m-0" src="<%= list.games[i].image %>">
                            <% } %>
                            <% if (list.games.length > 6) { %>
                                <span class="h5 pl-2 font-weight-bold"><a class="text-light" href="/list/<%= list._id %>">+<%= list.games.length - i %></a></span>
                            <% } %>
                        </div>
                        <% if (list.description && list.description != "") { %>
                            <div><%= list.description %></div>
                        <% } %>
                    </div>
                <% }) %>
            <% } %>
        </div>
    </div>
</div>
<%- include (".././partials/footer") %>
