<%- include (".././partials/header") %>
<%- include (".././partials/navbar") %>
<div class="container py-5 px-5 h-100 main">
    <div class="row">
        <div class="col">
            <form action="/list/new" class="inline">
                <button class="btn btn-outline-primary float-right submit-button">Create New List</button>
            </form>
            <h1>My Lists</h1>
            <% if (current_user && lists && lists.length > 0) { %>
                <% lists.forEach(list => { %>
                    <div class="list-card my-3 py-4 pl-4">
                        <div class="flex-container">
                            <h5 class="flex-child pb-2"><a href="/list/<%= list._id %>"><%= list.name %></a></h5>  
                            <div class="flex-child mr-4 text-right">
                                <span><%= list.likes.length %> Likes •</span>
                                <span><%= list.comments.length %> Comments • </span>
                                <span>Created on <span><%= list.createdAt.toDateString() %></span>
                            </div>
                        </div>
                        <div class="p-0 m-0">
                            <% let i = 0 %>
                            <% for (; i < 6 && i < list.games.length; i = i + 1) { %>
                                <a href="/games/<%= list.games[i]._id %>">
                                    <img class="list-img rounded p-0 m-0 edges" src="<%= list.games[i].image %>">
                                </a>
                            <% } %>
                            <% if (list.games.length > 6) { %>
                                <span class="h5 pl-2 font-weight-boldl"><a style="color: rgba(255, 255, 255, 0.60)" href="/list/<%= list._id %>">+<%= list.games.length - i %></a></span>
                            <% } %>
                        </div>
                        <% if (list.description && list.description != "") { %>
                            <div class="mt-3"><%= list.description %></div>
                        <% } %>
                    </div>
                <% }) %>
            <% } %>
        </div>
    </div>
</div>
<%- include (".././partials/footer") %>
